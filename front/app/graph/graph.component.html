<div class="graph-container">
    <svg (click)="onClick($event)" id="graph" width="300" height="300" viewBox="-150 -150 300 300" xmlns="http://www.w3.org/2000/svg">

        <line x1="-150" y1="0" x2="150" y2="0" stroke="grey"/>
        <line x1="0" y1="-150" x2="0" y2="150" stroke="grey"/>
        <text x="135" y="-5" font-size="12">x</text>
        <text x="-10" y="-135" font-size="12">y</text>

        <line x1="-100" y1="-5" x2="-100" y2="5" stroke="grey"/>
        <line x1="-50" y1="-5" x2="-50" y2="5" stroke="grey"/>
        <line x1="50" y1="-5" x2="50" y2="5" stroke="grey"/>
        <line x1="100" y1="-5" x2="100" y2="5" stroke="grey"/>
        <text x="-110" y="15" font-size="12">-R</text>
        <text x="-60" y="15" font-size="12">-R/2</text>
        <text x="40" y="15" font-size="12">R/2</text>
        <text x="90" y="15" font-size="12">R</text>

        <line x1="-5" y1="-100" x2="5" y2="-100" stroke="grey"/>
        <line x1="-5" y1="-50" x2="5" y2="-50" stroke="grey"/>
        <line x1="-5" y1="50" x2="5" y2="50" stroke="grey"/>
        <line x1="-5" y1="100" x2="5" y2="100" stroke="grey"/>
        <text x="5" y="105" font-size="12" style="color: grey">-R</text>
        <text x="5" y="55" font-size="12" style="color: grey">-R/2</text>
        <text x="5" y="-45" font-size="12" style="color: grey">R/2</text>
        <text x="5" y="-95" font-size="12" style="color: grey">R</text>

        <ng-container *ngIf="r >= 0">
          <!-- This is the original part of the graph (when r is non-negative) -->
          <rect x="0" y="-100" width="50" height="100" fill="blue" fill-opacity="0.5"/>
          <path d="M 0 0 L -100 0 A 100 100 0 0 1 0 -100 Z" fill="blue" fill-opacity="0.5"/>
          <polygon points="0,0 -100,0 0,50" fill="blue" fill-opacity="0.5"/>
        </ng-container>
        
        <ng-container *ngIf="r < 0">
          <!-- This is the mirrored part of the graph (when r is negative) -->
          <rect x="-50" y="0" width="50" height="100" fill="blue" fill-opacity="0.5"/>
          <path d="M 0 0 L 100 0 A 100 100 0 0 1 0 100 Z" fill="blue" fill-opacity="0.5"/>
          <polygon points="0,0 100,0 0,-50" fill="blue" fill-opacity="0.5"/>
        </ng-container>
      
        
        <ng-container *ngIf="r != 0">
          <circle *ngFor="let point of points" 
          [attr.cx]="(point.x / absR) * 100" 
          [attr.cy]="-(point.y / absR) * 100" 
          r="2" 
          [attr.fill]="isHit(point.x, point.y, r) ? 'green' : 'red'">
  </circle>          </ng-container>  
        </svg>

  <p *ngIf="errorMessage" style="color: red;">{{ errorMessage }}</p>
</div>